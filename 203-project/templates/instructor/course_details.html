{% extends "base.html" %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>{{ course.name }} <small class="text-muted">({{ course.code }})</small></h2>
    <a href="/instructor/dashboard" class="btn btn-secondary btn-sm">Back to Dashboard</a>
</div>

<ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item">
        <button class="nav-link active" id="assign-tab" data-bs-toggle="tab" data-bs-target="#assignments"
            type="button">Assignments</button>
    </li>
    <li class="nav-item">
        <button class="nav-link" id="announce-tab" data-bs-toggle="tab" data-bs-target="#announcements"
            type="button">Announcements</button>
    </li>
</ul>

<div class="tab-content border border-top-0 p-4 bg-white shadow-sm">

    <div class="tab-pane fade show active" id="assignments">
        <div class="row">
            <div class="col-md-5 mb-4">
                <div class="card bg-light">
                    <div class="card-body">
                        <h6>Add New Assignment</h6>
                        <form method="POST" action="/course/{{ course.id }}/add_assignment">
                            <input type="text" name="title" class="form-control mb-2" placeholder="Title" required>
                            <textarea name="content" class="form-control mb-2" rows="2" placeholder="Description"
                                required></textarea>
                            <button type="submit" class="btn btn-success btn-sm w-100">Post Assignment</button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-7">
                <h6>Current Assignments</h6>
                <ul class="list-group">
                    {% for assign in course.assignments %}
                    <li class="list-group-item">
                        <strong>{{ assign.title }}</strong>
                        <p class="mb-0 text-muted small">{{ assign.content }}</p>
                    </li>
                    {% else %}
                    <li class="list-group-item text-muted">No assignments yet.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>

    <div class="tab-pane fade" id="announcements">
        <div class="row">
            <div class="col-md-5 mb-4">
                <div class="card bg-light">
                    <div class="card-body">
                        <h6>Post Announcement</h6>
                        <form method="POST" action="/course/{{ course.id }}/add_announcement">
                            <input type="text" name="title" class="form-control mb-2" placeholder="Title" required>
                            <textarea name="body" class="form-control mb-2" rows="2" placeholder="Content"
                                required></textarea>
                            <button type="submit" class="btn btn-warning btn-sm w-100">Post</button>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-md-7">
                <h6>History</h6>
                <ul class="list-group">
                    {% for ann in course.announcements %}
                    <li class="list-group-item">
                        <strong>{{ ann.title }}</strong>
                        <p class="mb-0 small">{{ ann.body }}</p>
                    </li>
                    {% else %}
                    <li class="list-group-item text-muted">No announcements yet.</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>

</div>
{% endblock %}